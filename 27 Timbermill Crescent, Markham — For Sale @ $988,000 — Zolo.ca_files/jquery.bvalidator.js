!function(a){a.fn.bValidator=function(b,c){return this.each(function(){new bValidator(a(this),b,c)})},bValidator=function(b,c,d){var e,f={singleError:!1,offset:{x:-93,y:-7},position:{x:"right",y:"top"},template:'<div class="{errMsgClass}"><em/>{message}</div>',templateCloseIcon:'<div style="display:table"><div style="display:table-cell">{message}</div><div style="display:table-cell"><div class="{closeIconClass}">x</div></div></div>',showCloseIcon:!1,showErrMsgSpeed:"normal",scrollToError:!0,classNamePrefix:"bvalidator_",closeIconClass:"close_icon",errMsgClass:"errmsg",errorClass:"invalid",validClass:"",lang:"en",errorMessageAttr:"data-bvalidator-msg",validateActionsAttr:"data-bvalidator",forceValidAttr:"data-bvalidator-forcevalid",modifyActionsAttr:"data-bvalidator-modifier",paramsDelimiter:":",actionsDelimiter:",",validateOn:null,errorValidateOn:"blur",onBeforeValidate:null,onAfterValidate:null,onValidateFail:null,onValidateSuccess:null,onBeforeElementValidation:null,onAfterElementValidation:null,onBeforeAllValidations:null,onAfterAllValidations:null,validateOnSubmit:!0,stopSubmitPropagation:!0,noMsgIfExistsForInstance:[],validateTillInvalid:!1,autoModifiers:{digit:["trim"],number:["trim"],email:["trim"],url:["trim"],date:["trim"],ip4:["trim"],ip6:["trim"]},ajaxAnswerValid:"ok",ajaxDelay:300,ajaxOptions:{cache:!1},ajaxParamName:"bValue",errorMessages:{en:{default:"Please correct this value.",equalto:"Please enter the same value again.",differs:"Please enter a different value.",minlength:"The length must be at least {0} characters",maxlength:"The length must be at max {0} characters",rangelength:"The length must be between {0} and {1}",min:"Please enter a number greater than or equal to {0}.",max:"Please enter a number less than or equal to {0}.",between:"Please enter a number between {0} and {1}.",required:"This field is required.",alpha:"Please enter alphabetic characters only.",alphanum:"Please enter alphanumeric characters only.",digit:"Please enter only digits.",number:"Please enter a valid number.",email:"Please enter a valid email address.",image:"This field should only contain image types",url:"Please enter a valid URL.",ip4:"Please enter a valid IPv4 address.",ip6:"Please enter a valid IPv6 address.",date:"Please enter a valid date in format {0}."}}},g=function(b,c,d,e){var g=b.data("ajaxData.bV"+c);if(g?clearTimeout(g.timeOut):(g={},b.data("ajaxData.bV"+c,g)),g.val=b.val(),g.lastValidated===g.val)return v.ajax(g.lastResponse);var h=a.extend({},f.ajaxOptions);if("object"!=typeof h.data&&(h.data={}),h.url=d,e){var i=!1;return h.async=!1,h.data[f.ajaxParamName]=g.val,a.ajax(h).done(function(a){g.lastValidated=g.val,g.lastResponse=a,i=v.ajax(a)}),i}g.timeOut=setTimeout(function(){var c=b.val();g.val==c&&(h.async=!0,h.data[f.ajaxParamName]=c,a.ajax(h).done(function(a){g.lastValidated=c,g.lastResponse=a,x.validate(!1,b,void 0,a)}))},f.ajaxDelay)},h=function(a){return a.is(":input")?a:a.find(":input["+f.validateActionsAttr+"], :input["+f.modifyActionsAttr+"]").not(":button, :image, :reset, :submit, :hidden, :disabled")},i=function(b){b.bind(f.validateOn+".bV"+d,{bVInstance:x},function(b){b.data.bVInstance.validate(!1,a(this))})},j=function(a,b){for(var c=0;c<b.length;c++)if(a.data("errMsg.bV"+b[c]))return!0;return!1},k=function(b,c){l(b),msg_container=a('<div class="bVErrMsgContainer"></div>').css("position","absolute"),b.data("errMsg.bV"+d,msg_container),msg_container.insertAfter(b);for(var g="",h=0;h<c.length;h++)g+="<div>"+c[h]+"</div>\n";f.showCloseIcon&&(g=f.templateCloseIcon.replace("{message}",g).replace("{closeIconClass}",f.classNamePrefix+f.closeIconClass));var i=a(f.template.replace("{errMsgClass}",f.classNamePrefix+f.errMsgClass).replace("{message}",g));i.appendTo(msg_container),i.find("."+f.classNamePrefix+f.closeIconClass).click(function(b){b.preventDefault(),a(this).closest("."+f.classNamePrefix+f.errMsgClass).css("visibility","hidden")});var j=m(b,i);if(i.css({visibility:"visible",position:"absolute",top:j.top,left:j.left}).fadeIn(f.showErrMsgSpeed),f.scrollToError){var k=i.offset().top;(null===e||k<e)&&(e=k)}},l=function(a){var b=a.data("errMsg.bV"+d);b&&(b.remove(),a.data("errMsg.bV"+d,null))},m=function(a,b){var c=a.data("errMsg.bV"+d),e=-(c.offset().top-a.offset().top+b.outerHeight()-f.offset.y),g=a.offset().left+a.outerWidth()-c.offset().left+f.offset.x,h=f.position.x,i=f.position.y;if("center"==i||"bottom"==i){var j=b.outerHeight()+a.outerHeight();"center"==i&&(e+=j/2),"bottom"==i&&(e+=j)}if("center"==h||"left"==h){var k=a.outerWidth();"center"==h&&(g-=k/2),"left"==h&&(g-=k)}return{top:e,left:g}},n=function(b,c,d,e){if(a.isFunction(f[b]))return f[b](c,d,e)},o=function(b){var c=b.attr("name");return c&&/^[^\[\]]+\[.*\]$/.test(c)?a("input:checkbox").filter(function(){var a=new RegExp(c.match(/^[^\[\]]+/)[0]+"\\[.*\\]$");return this.name.match(a)}):b},p=function(b){var c={};return b.is("input:checkbox")?c.value=b.attr("name")?c.selectedInGroup=o(b).filter(":checked").length:b.attr("checked"):b.is("input:radio")?c.value=b.attr("name")?c.value=a('input:radio[name="'+b.attr("name")+'"]:checked').length:b.val():b.is("select")?(c.selectedInGroup=a("option:selected",b).length,c.value=b.val()):b.is(":input")&&(c.value=b.val()),c},q=function(b){var c=a.trim(b).replace(new RegExp("\\s*\\"+f.actionsDelimiter+"\\s*","g"),f.actionsDelimiter);return c?c.split(f.actionsDelimiter):null},r=function(b){var c=a.trim(b).match(/^(.*?)\[(.*?)\]/);return c&&3==c.length?{name:c[1],params:c[2].split(f.paramsDelimiter)}:{name:b,params:[]}},s=function(b,c){var d,e=t(b,c);"undefined"!=typeof e&&(d=a(c).val(),d!=e&&a(c).val(e))},t=function(b,c){var d=[a(c).val()].concat(b.params);return"function"==typeof w[b.name]?w[b.name].apply(c,d):"function"==typeof window[b.name]?window[b.name].apply(c,d):void(window.console.warn&&window.console.warn("[bValidator] unknown modifier: "+b.name))},u=function(a,b,c){return"function"==typeof v[a.name]?v[a.name].apply(b,[c].concat(a.params)):"function"==typeof window[a.name]?window[a.name].apply(b,[c.value].concat(a.params)):void(window.console.warn&&window.console.warn("[bValidator] unknown validator: "+a.name))},v={equalto:function(b,c){return b.value==a("#"+c).val()},differs:function(b,c){return b.value!=a("#"+c).val()},minlength:function(a,b){return a.value.length>=parseInt(b)},maxlength:function(a,b){return a.value.length<=parseInt(b)},rangelength:function(a,b,c){return a.value.length>=parseInt(b)&&a.value.length<=parseInt(c)},min:function(a,b){return a.selectedInGroup?a.selectedInGroup>=parseFloat(b):!!v.number(a)&&parseFloat(a.value)>=parseFloat(b)},max:function(a,b){return a.selectedInGroup?a.selectedInGroup<=parseFloat(b):!!v.number(a)&&parseFloat(a.value)<=parseFloat(b)},between:function(a,b,c){if(a.selectedInGroup)return a.selectedInGroup>=parseFloat(b)&&a.selectedInGroup<=parseFloat(c);if(!v.number(a))return!1;var d=parseFloat(a.value);return d>=parseFloat(b)&&d<=parseFloat(c)},required:function(b){return!(!b.value||!a.trim(b.value))},alpha:function(a){return v.regex(a,/^[a-z ._\-]+$/i)},alphanum:function(a){return v.regex(a,/^[a-z\d ._\-]+$/i)},digit:function(a){return v.regex(a,/^\d+$/)},number:function(a){return v.regex(a,/^[-+]?\d+(\.\d+)?$/)},email:function(a){return v.regex(a,/^([a-zA-Z\d_\.\-\+%])+\@(([a-zA-Z\d\-])+\.)+([a-zA-Z\d]{2,4})+$/)},image:function(a){return v.regex(a,/\.(jpg|jpeg|png|gif|bmp)$/i)},url:function(a){return v.regex(a,/^\b(https?|ftp):\/\/([-A-Z0-9.]+)(\/[-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)},regex:function(a,b,c){return"string"==typeof b&&(b=new RegExp(b,c)),b.test(a.value)},ip4:function(a){return v.regex(a,/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/)},ip6:function(a){return v.regex(a,/^(?:(?:(?:[A-F\d]{1,4}:){5}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){4}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,3}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){1,5}|:(?::[A-F\d]{1,4}){1,5}|:):(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)|(?:[A-F\d]{1,4}:){7}[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){6}:[A-F\d]{1,4}|(?:[A-F\d]{1,4}:){5}(?::[A-F\d]{1,4}){1,2}|(?:[A-F\d]{1,4}:){4}(?::[A-F\d]{1,4}){1,3}|(?:[A-F\d]{1,4}:){3}(?::[A-F\d]{1,4}){1,4}|(?:[A-F\d]{1,4}:){2}(?::[A-F\d]{1,4}){1,5}|[A-F\d]{1,4}:(?::[A-F\d]{1,4}){1,6}|(?:[A-F\d]{1,4}:){1,7}:|:(?::[A-F\d]{1,4}){1,7})$/i)},date:function(a,b){if(10==a.value.length&&10==b.length){var c=b.match(/[^mdy]+/g);if(2==c.length&&1==c[0].length&&c[0]==c[1]){for(var d=a.value.split(c[0]),e=b.split(c[0]),f=0;f<3;f++)if("dd"==e[f])var g=d[f];else if("mm"==e[f])var h=d[f];else if("yyyy"==e[f])var i=d[f];var j=new Date(i,h-1,g);return j.getMonth()+1==h&&j.getDate()==g&&j.getFullYear()==i}}return!1},extension:function(){var a=arguments[0],b="";if(!arguments[1])return!1;for(var c=1;c<arguments.length;c++)b+=arguments[c],c!=arguments.length-1&&(b+="|");return v.regex(a,"\\.("+b+")$","i")},ajax:function(a){return a==f.ajaxAnswerValid}},w={trim:function(b){return a.trim(b)}},x=this;window.bValidatorOptions&&a.extend(!0,f,window.bValidatorOptions),c&&a.extend(!0,f,c);var y=b.data("bValidators");if(y||(y={},b.data("bValidators",y)),b.data("bValidator")){if(!d)return b.data("bValidator");if(y[d])return y[d]}else d||(d="first"),b.data("bValidator",this);y[d]=this,b.is("form")&&(f.validateOnSubmit&&b.bind("submit.bV"+d,function(a){return!!x.validate(!1,void 0,1)||(f.stopSubmitPropagation?(a.stopImmediatePropagation(),!1):void 0)}),b.bind("reset.bV"+d,function(){x.reset()})),f.validateOn&&i(h(b)),this.validate=function(c,m,t,w,y){var z=!0,A=m?m:h(b);if(e=null,"undefined"==typeof w&&n("onBeforeAllValidations",A)===!1||A.each(function(){var b,e=q(a(this).attr(f.validateActionsAttr)),h=q(a(this).attr(f.modifyActionsAttr)),m=-1,A=[],B=0;if(h)for(var C=0;C<h.length;C++)b=r(h[C]),b.name&&s(b,this);if(!e)return!0;for(var C=0;C<e.length;C++)if(b=r(e[C]),b.name){if(f.autoModifiers&&f.autoModifiers[b.name])for(var D=0;D<f.autoModifiers[b.name].length;D++)s(r(f.autoModifiers[b.name][D]),this);if("required"==b.name)var E=1;else if("ajax"==b.name)var F=1;if("valempty"==b.name)var G=1;else A[++m]=b}var H,I=p(a(this)),J=[];if(!t&&F&&"undefined"==typeof w){for(var K=0,C=0;C<A.length&&"ajax"!=A[C].name;C++)if(!u(A[C],this,I)){K=1;break}if(!K&&(w=g(a(this),d,b.params[0]),"undefined"==typeof w))return!0}if(f.noMsgIfExistsForInstance.length&&j(a(this),f.noMsgIfExistsForInstance)&&(c=1),(E||G||v.required(I))&&"true"!=a(this).attr(f.forceValidAttr)||(B=1),!B){var L=a(this).attr(f.errorMessageAttr),M=0;if(a(this).data("checked.bV"+d,1),n("onBeforeElementValidation",a(this))!==!1)for(var C=0;C<A.length;C++)if("valempty"!=A[C].name){if((f.validateTillInvalid||y)&&J.length)break;if(n("onBeforeValidate",a(this),A[C].name)!==!1){if("ajax"==A[C].name){if(K)continue;H=t||"undefined"==typeof w?!!J.length||g(a(this),d,A[C].params[0],1):v.ajax.apply(this,[w])}else H=u(A[C],this,I);if(n("onAfterValidate",a(this),A[C].name,H)!==!1)if(H)n("onValidateSuccess",a(this),A[C].name);else{if(c)J[J.length]="";else if(!M){if(L)M=1;else if(f.singleError&&J.length)M=1,L="";else if(f.errorMessages[f.lang]&&f.errorMessages[f.lang][A[C].name])L=f.errorMessages[f.lang][A[C].name];else if(f.errorMessages.en[A[C].name])L=f.errorMessages.en[A[C].name];else{var N=a(this).attr(f.errorMessageAttr+"-"+A[C].name);L=N?N:f.errorMessages[f.lang]&&f.errorMessages[f.lang].default?f.errorMessages[f.lang].default:f.errorMessages.en.default}if(L.indexOf("{"))for(var O=0;O<A[C].params.length;O++)L=L.replace(new RegExp("\\{"+O+"\\}","g"),A[C].params[O]);J.length&&"required"==A[C].name||(J[J.length]=L),L=null}z=!1,n("onValidateFail",a(this),A[C].name,J)}}}var P=n("onAfterElementValidation",a(this),J)}if(!c&&P!==!1&&a(this).data("checked.bV"+d)){var Q=a(this).is("input:checkbox,input:radio")?1:0;if(J.length){if(0!==P&&k(a(this),J),Q||(a(this).removeClass(f.classNamePrefix+f.validClass),f.errorClass&&a(this).addClass(f.classNamePrefix+f.errorClass)),f.errorValidateOn){f.validateOn&&a(this).unbind(f.validateOn+".bV"+d);var R=Q||a(this).is("select,input:file")?"change":f.errorValidateOn;if(Q){var S=a(this).is("input:checkbox")?o(a(this)):a('input:radio[name="'+a(this).attr("name")+'"]');a(S).unbind(".bVerror"+d),a(S).bind("change.bVerror"+d,{bVInstance:x,groupLeader:a(this)},function(a){a.data.bVInstance.validate(!1,a.data.groupLeader)})}else a(this).unbind(".bVerror"+d),a(this).bind(R+".bVerror"+d,{bVInstance:x},function(b){b.data.bVInstance.validate(!1,a(this))})}}else 0!==P&&l(a(this)),Q||(a(this).removeClass(f.classNamePrefix+f.errorClass),f.validClass&&a(this).addClass(f.classNamePrefix+f.validClass)),f.validateOn&&(a(this).unbind(f.validateOn+".bV"+d),i(a(this))),a(this).data("checked.bV"+d,0)}return(!f.singleError&&!y||z!==!1)&&void 0}),n("onAfterAllValidations",A,z),e&&!m&&(a(window).scrollTop()>e||a(window).scrollTop()+a(window).height()<e)){var B=navigator.userAgent.toLowerCase();a(B.indexOf("chrome")>-1||B.indexOf("safari")>-1?"body":"html").animate({scrollTop:e-10},{duration:"slow"})}return z},this.getOptions=function(){return f},this.getValidators=this.getActions=function(){return v},this.getModifiers=function(){return w},this.isValid=function(a){return this.validate(!0,a,1,void 0,!0)},this.removeMsg=this.removeErrMsg=function(a){l(a)},this.showMsg=function(a,b){a.length&&("string"==typeof b&&(b=[b]),k(a,b))},this.getInputs=function(){return h(b)},this.bindValidateOn=function(a){i(a)},this.reset=function(){elements=h(b),f.validateOn&&i(elements),elements.each(function(){l(a(this)),a(this).unbind(".bVerror"+d),a(this).removeClass(f.classNamePrefix+f.errorClass),a(this).removeClass(f.classNamePrefix+f.validClass),a(this).removeData("ajaxData.bV"+d),a(this).removeData("errMsg.bV"+d),a(this).removeData("checked.bV"+d)})},this.destroy=function(){b.is("form")&&b.unbind(".bV"+d),this.reset(),b.removeData("bValidator"),b.removeData("bValidators")}}}(jQuery);